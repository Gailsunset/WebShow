<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>帝王在位时间对比柱状图</title>
    <!-- 引入依赖资源 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 基础样式优化，兼顾美观与可读性 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: "Microsoft YaHei", "Heiti SC", "PingFang SC", sans-serif;
            background-color: #f8fafc;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: box-shadow 0.3s ease;
        }
        .container:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        h1 {
            text-align: center;
            color: #1e293b;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        .chart-container {
            position: relative;
            height: 500px;
            width: 100%;
            margin: 0 auto;
        }
        .note {
            margin-top: 20px;
            text-align: center;
            color: #64748b;
            font-size: 14px;
            line-height: 1.5;
            padding: 10px;
            background-color: #f1f5f9;
            border-radius: 4px;
        }
        /* 响应式适配：小屏幕下调整内边距和图表高度 */
        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            .chart-container {
                height: 400px;
            }
            h1 {
                font-size: 20px;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>中国主要帝王在位时间对比</h1>
        <!-- 图表容器 -->
        <div class="chart-container">
            <canvas id="reignChart"></canvas>
        </div>
        <!-- 说明文本：优化背景色提升可读性 -->
        <div class="note">
            说明：红色=最长在位时间，蓝色=最短在位时间 | 鼠标悬浮查看详细信息
        </div>
    </div>

    <script>
        // 核心帝王数据（精选10位，覆盖不同时长/朝代，确保数据准确性）
        const reignData = [
            { name: "康熙", dynasty: "清朝", start: 1661, end: 1722, years: 61, days: 0, totalDays: 22209 },
            { name: "乾隆", dynasty: "清朝", start: 1735, end: 1796, years: 60, days: 0, totalDays: 21915 },
            { name: "汉武帝", dynasty: "汉朝", start: 141, end: 87, years: 54, days: 0, totalDays: 19710 },
            { name: "万历帝", dynasty: "明朝", start: 1572, end: 1620, years: 48, days: 0, totalDays: 17520 },
            { name: "唐太宗", dynasty: "唐朝", start: 626, end: 649, years: 23, days: 0, totalDays: 8395 },
            { name: "宋太祖", dynasty: "宋朝", start: 960, end: 976, years: 16, days: 0, totalDays: 5840 },
            { name: "秦始皇", dynasty: "秦朝", start: 221, end: 210, years: 11, days: 0, totalDays: 4015 },
            { name: "汉高祖", dynasty: "汉朝", start: 202, end: 195, years: 7, days: 0, totalDays: 2555 },
            { name: "崇祯帝", dynasty: "明朝", start: 1627, end: 1644, years: 17, days: 0, totalDays: 6205 },
            { name: "袁世凯", dynasty: "民国", start: 1916, end: 1916, years: 0, days: 83, totalDays: 83 }
        ];

        // 按在位总天数降序排序，强化视觉对比逻辑
        reignData.sort((a, b) => b.totalDays - a.totalDays);

        // 图表数据格式化：兼顾可读性与准确性
        const labels = reignData.map(item => item.name);
        const data = reignData.map(item => (item.totalDays / 365).toFixed(1) * 1); // 保留1位小数，转为数字类型
        const backgroundColors = reignData.map((_, index) => 
            index === 0 ? 'rgba(239, 68, 68, 0.7)' : // 最长在位-红色（高辨识度）
            index === reignData.length - 1 ? 'rgba(59, 130, 246, 0.7)' : // 最短在位-蓝色（高辨识度）
            'rgba(107, 114, 128, 0.7)' // 其他-灰色（不干扰极值识别）
        );
        const borderColors = reignData.map((_, index) => 
            index === 0 ? 'rgba(239, 68, 68, 1)' : 
            index === reignData.length - 1 ? 'rgba(59, 130, 246, 1)' : 
            'rgba(107, 114, 128, 1)'
        );

        // 初始化Chart.js图表：优化交互体验与视觉呈现
        const ctx = document.getElementById('reignChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: '在位时间（年）',
                    data: data,
                    backgroundColor: backgroundColors,
                    borderColor: borderColors,
                    borderWidth: 1,
                    borderRadius: 4, // 圆角设计提升美观度
                    hoverBackgroundColor: reignData.map((_, index) => 
                        index === 0 ? 'rgba(239, 68, 68, 0.9)' : 
                        index === reignData.length - 1 ? 'rgba(59, 130, 246, 0.9)' : 
                        'rgba(107, 114, 128, 0.9)'
                    ), //  hover时加深颜色，强化交互反馈
                    barPercentage: 0.6, // 调整柱状图宽度，避免拥挤
                    categoryPercentage: 0.7
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false, // 禁用固定宽高比，适配容器
                animation: {
                    duration: 1000, // 平滑加载动画，提升体验
                    easing: 'easeOutQuart'
                },
                plugins: {
                    legend: { display: false }, // 隐藏冗余图例
                    tooltip: {
                        // 自定义提示框：信息完整且简洁
                        callbacks: {
                            title: ctx => `${reignData[ctx[0].dataIndex].name}（${reignData[ctx[0].dataIndex].dynasty}）`,
                            label: ctx => {
                                const item = reignData[ctx.dataIndex];
                                const duration = item.years > 0 ? `${item.years}年` : `${item.days}天`;
                                return `在位时间：${duration}（${item.start}-${item.end}）`;
                            }
                        },
                        backgroundColor: 'rgba(0, 0, 0, 0.7)',
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 12 },
                        padding: 12,
                        cornerRadius: 6,
                        displayColors: false, // 隐藏多余颜色块
                        delay: 50, // 延迟显示，避免误触
                        animationDuration: 100 // 提示框显示动画
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { 
                            display: true, 
                            text: '在位时间（年）', 
                            font: { size: 14, weight: '500' },
                            padding: { top: 15 }
                        },
                        ticks: { 
                            callback: val => `${val}年`, // 明确单位
                            font: { size: 12 },
                            stepSize: 10 // 合理划分刻度，避免密集
                        },
                        grid: {
                            color: 'rgba(203, 213, 225, 0.3)', // 浅灰色网格线，降低干扰
                            drawBorder: false // 隐藏Y轴边框，简洁美观
                        }
                    },
                    x: { 
                        title: { 
                            display: true, 
                            text: '帝王名称', 
                            font: { size: 14, weight: '500' },
                            padding: { bottom: 15 }
                        },
                        ticks: { font: { size: 12 } },
                        grid: { display: false } // 隐藏X轴网格线，避免视觉混乱
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false // 鼠标悬浮时，同一X轴位置的元素均触发提示框，提升交互便捷性
                }
            }
        });
    </script>
</body>
</html>