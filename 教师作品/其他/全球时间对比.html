<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å…¨çƒä¸»è¦åŸå¸‚æ—¶é—´å¯¹æ¯”</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #f9f9fb;
      color: #333;
      padding: 20px;
    }

    header {
      text-align: center;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 10px;
      color: #2c3e50;
    }

    .reference-time {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 20px 0;
    }

    .flag {
      width: 40px;
      height: 24px;
      background-size: contain;
      background-repeat: no-repeat;
      margin-bottom: 10px;
    }

    .time-display {
      font-size: 2.5rem;
      font-weight: bold;
      margin: 10px 0;
      color: #2c3e50;
    }

    .date-display {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #555;
    }

    .clock {
      width: 200px;
      height: 200px;
      border: 4px solid #2c3e50;
      border-radius: 50%;
      position: relative;
      margin: 0 auto 20px;
      background-color: #fff;
    }

    .clock .hour, .clock .minute, .clock .second {
      position: absolute;
      background: #2c3e50;
      transform-origin: bottom center;
      left: 50%;
      bottom: 50%;
    }

    .clock .hour {
      width: 6px;
      height: 40px;
      margin-left: -3px;
    }

    .clock .minute {
      width: 4px;
      height: 60px;
      margin-left: -2px;
    }

    .clock .second {
      width: 2px;
      height: 70px;
      background: #e74c3c;
      margin-left: -1px;
    }

    .instructions {
      text-align: center;
      margin: 20px 0;
      font-size: 1rem;
      color: #7f8c8d;
    }

    .cities-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .city-card {
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      background-color: #fff;
    }

    .city-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }

    .city-card.day {
      background-color: #fff9e6; /* æµ…é»„ */
    }

    .city-card.night {
      background-color: #e6f2ff; /* æµ…è“ */
    }

    .city-header {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }

    .city-flag {
      width: 32px;
      height: 20px;
      background-size: contain;
      background-repeat: no-repeat;
      margin-right: 10px;
    }

    .city-name {
      font-size: 1.3rem;
      font-weight: bold;
      color: #2c3e50;
    }

    .city-time {
      font-size: 1.4rem;
      font-weight: bold;
      margin: 8px 0;
      color: #2c3e50;
    }

    .city-date {
      font-size: 1rem;
      color: #555;
      margin-bottom: 10px;
    }

    .daynight-tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: bold;
      color: white;
    }

    .daynight-tag.day {
      background-color: #f1c40f;
    }

    .daynight-tag.night {
      background-color: #3498db;
    }

    @media (max-width: 600px) {
      .cities-grid {
        grid-template-columns: 1fr;
      }
      .time-display {
        font-size: 2rem;
      }
      .clock {
        width: 160px;
        height: 160px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>å…¨çƒä¸»è¦åŸå¸‚æ—¶é—´å¯¹æ¯”</h1>
  </header>

  <div class="reference-time">
    <div class="flag" id="ref-flag"></div>
    <div class="time-display" id="ref-time">--:--:--</div>
    <div class="date-display" id="ref-date">----</div>
    <div class="clock">
      <div class="hour" id="hour-hand"></div>
      <div class="minute" id="minute-hand"></div>
      <div class="second" id="second-hand"></div>
    </div>
  </div>

  <p class="instructions">ç‚¹å‡»åŸå¸‚å¡ç‰‡ä»¥é€‰æ‹©å‚ç…§åŸå¸‚ï¼ŒæŸ¥çœ‹å…¶ä»–åŸå¸‚çš„æ—¶å·®</p>

  <div class="cities-grid" id="cities-container">
    <!-- åŸå¸‚å¡ç‰‡å°†ç”± JS åŠ¨æ€ç”Ÿæˆ -->
  </div>

  <script>
    // åŸå¸‚æ•°æ®ï¼šåŸå¸‚åã€æ—¶åŒºï¼ˆIANAï¼‰ã€å›½æ—— CSS ç±»
    const cities = [
      { name: "åŒ—äº¬", tz: "Asia/Shanghai", flag: "cn" },
      { name: "çº½çº¦", tz: "America/New_York", flag: "us" },
      { name: "ä¼¦æ•¦", tz: "Europe/London", flag: "gb" },
      { name: "å·´é»", tz: "Europe/Paris", flag: "fr" },
      { name: "ä¸œäº¬", tz: "Asia/Tokyo", flag: "jp" },
      { name: "æ‚‰å°¼", tz: "Australia/Sydney", flag: "au" },
      { name: "è«æ–¯ç§‘", tz: "Europe/Moscow", flag: "ru" },
      { name: "è¿ªæ‹œ", tz: "Asia/Dubai", flag: "ae" }
    ];

    // å›½æ——èƒŒæ™¯æ˜ å°„ï¼ˆä½¿ç”¨ emoji ä½œä¸ºç®€æ˜“æ›¿ä»£ï¼‰
    const flagEmoji = {
      cn: "ğŸ‡¨ğŸ‡³",
      us: "ğŸ‡ºğŸ‡¸",
      gb: "ğŸ‡¬ğŸ‡§",
      fr: "ğŸ‡«ğŸ‡·",
      jp: "ğŸ‡¯ğŸ‡µ",
      au: "ğŸ‡¦ğŸ‡º",
      ru: "ğŸ‡·ğŸ‡º",
      ae: "ğŸ‡¦ğŸ‡ª"
    };

    let referenceCityIndex = 0; // é»˜è®¤åŒ—äº¬

    // æ ¼å¼åŒ–æ˜ŸæœŸ
    function getWeekday(date) {
      const weekdays = ["æ˜ŸæœŸæ—¥", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸä¸‰", "æ˜ŸæœŸå››", "æ˜ŸæœŸäº”", "æ˜ŸæœŸå…­"];
      return weekdays[date.getDay()];
    }

    // åˆ¤æ–­ç™½å¤©/å¤œæ™šï¼ˆç®€åŒ–ï¼š6:00-18:00 ä¸ºç™½å¤©ï¼‰
    function isDay(time24) {
      const hour = parseInt(time24.split(':')[0], 10);
      return hour >= 6 && hour < 18;
    }

    // æ›´æ–°æ‰€æœ‰æ˜¾ç¤º
    function updateAll() {
      const now = new Date();
      const refCity = cities[referenceCityIndex];
      const refTime = new Intl.DateTimeFormat('zh-CN', {
        timeZone: refCity.tz,
        hour12: false,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      }).format(now);

      const refDateObj = new Date(now.toLocaleString("en-US", { timeZone: refCity.tz }));
      const refDateStr = `${refDateObj.getFullYear()}å¹´${String(refDateObj.getMonth() + 1).padStart(2, '0')}æœˆ${String(refDateObj.getDate()).padStart(2, '0')}æ—¥`;
      const refWeekday = getWeekday(refDateObj);

      document.getElementById('ref-time').textContent = refTime;
      document.getElementById('ref-date').textContent = `${refDateStr} ${refWeekday}`;
      document.getElementById('ref-flag').textContent = flagEmoji[refCity.flag];

      // æ›´æ–°æ¨¡æ‹Ÿæ—¶é’Ÿï¼ˆåŸºäºå‚è€ƒåŸå¸‚æ—¶é—´ï¼‰
      const refHours = refDateObj.getHours();
      const refMinutes = refDateObj.getMinutes();
      const refSeconds = refDateObj.getSeconds();

      const hourDeg = (refHours % 12) * 30 + refMinutes * 0.5;
      const minuteDeg = refMinutes * 6;
      const secondDeg = refSeconds * 6;

      document.getElementById('hour-hand').style.transform = `translateX(-50%) rotate(${hourDeg}deg)`;
      document.getElementById('minute-hand').style.transform = `translateX(-50%) rotate(${minuteDeg}deg)`;
      document.getElementById('second-hand').style.transform = `translateX(-50%) rotate(${secondDeg}deg)`;

      // æ¸²æŸ“åŸå¸‚å¡ç‰‡
      const container = document.getElementById('cities-container');
      container.innerHTML = '';

      cities.forEach((city, idx) => {
        const cityTime = new Intl.DateTimeFormat('zh-CN', {
          timeZone: city.tz,
          hour12: false,
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit'
        }).format(now);

        const cityDateObj = new Date(now.toLocaleString("en-US", { timeZone: city.tz }));
        const cityDateStr = `${cityDateObj.getFullYear()}å¹´${String(cityDateObj.getMonth() + 1).padStart(2, '0')}æœˆ${String(cityDateObj.getDate()).padStart(2, '0')}æ—¥`;
        const cityWeekday = getWeekday(cityDateObj);
        const dayNight = isDay(cityTime) ? 'day' : 'night';

        const card = document.createElement('div');
        card.className = `city-card ${dayNight}`;
        card.dataset.index = idx;
        card.innerHTML = `
          <div class="city-header">
            <span class="city-flag">${flagEmoji[city.flag]}</span>
            <span class="city-name">${city.name}</span>
          </div>
          <div class="city-time">${cityTime}</div>
          <div class="city-date">${cityDateStr} ${cityWeekday}</div>
          <span class="daynight-tag ${dayNight}">${dayNight === 'day' ? 'ç™½å¤©' : 'å¤œæ™š'}</span>
        `;
        card.addEventListener('click', () => {
          referenceCityIndex = idx;
          updateAll();
        });
        container.appendChild(card);
      });
    }

    // åˆå§‹åŒ–å¹¶æ¯ç§’æ›´æ–°
    updateAll();
    setInterval(updateAll, 1000);
  </script>
</body>
</html>